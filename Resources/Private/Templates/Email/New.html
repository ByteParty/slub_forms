<f:layout name="Default" />

This template displays a NEW form for the current domain object.

If you modify this template, do not forget to change the overwrite settings
in /Configuration/ExtensionBuilder/settings.yaml:
  Resources:
    Private:
      Templates:
        New.html: keep

Otherwise your changes will be overwritten the next time you save the extension in the extension builder
<f:section name="categoryTree">
	<ul>
		<f:for each="{categories}" key="id" as="category">
				<li class="slub-form-select-{id}">
					<f:form.radio id="slub-form-select-{id}" property="form" value="{category.item}" checked="<sf:form.formId form='{category.item}' /> == {category.item.uid}" />
					<label for="slub-form-select-{id}">{category.item.title}</label>
					<f:if condition="{category.children}">
						<f:render section="categoryTree" arguments="{categories: category.children, categoriesSelected: categoriesSelected}" />
					</f:if>
			    </li>
		</f:for>
	</ul>
</f:section>

<f:section name="subForms">

	<f:for each="{forms}" key="formid" as="form">
		<f:if condition="<sf:form.formId form='{form.item}' /> == {formid}">
			<f:then>
				<div id="slub-forms-form-{formid}" class="slub-forms-form {form.item.shortname}">
			</f:then>
			<f:else>
				<div id="slub-forms-form-{formid}" class="slub-forms-form {form.item.shortname} hide">
			</f:else>
		</f:if>
		<h3 class="formtitle"><span class="slub-forms-back2select" title="zurÃ¼ck zur Formularauswahl">&larr; <f:translate key="slub-forms.back" /></span><br>
			{form.item.title}
		</h3>
		<f:for each="{form.item.fieldsets}" key="idfieldset" as="fieldset">
			<fieldset id="slub-forms-fieldset-{formid}-{fieldset.uid}" class="slub-forms-fieldset {fieldset.shortname}">
					<legend>{fieldset.title}</legend>
				<f:for each="{fieldset.fields}" key="idfield" as="field">
					<f:render partial="Forms/{field.type}" arguments="{form: form.item, fieldset: fieldset, field: field}" /><br />
				</f:for>
			</fieldset>
		</f:for>

		</div>

		<f:if condition="{form.children}">
			<f:render section="subForms" arguments="{forms: form.children}" />
		</f:if>
	</f:for>

</f:section>

<f:section name="main">
{namespace sf=Tx_SlubForms_ViewHelpers}

<f:if condition="{forms}">
	<f:form enctype="multipart/form-data" action="create" id="slubForm" name="newEmail" object="{newEmail}" >
		<div class="slub-form-tree">
			<div class="cats">
			<f:render section="categoryTree" arguments="{categories: forms}" />
			</div>
		</div>

		<f:render partial="FormErrors" arguments="{obj: 'newEmail'}" />
		<f:render partial="FormErrors" arguments="{obj: 'field'}" />

		<f:render section="subForms" arguments="{forms: forms}" />

	<f:form.hidden property="editcode" value="<sf:format.editCode />"/>
	</f:form>

<script>
$( "#slubForm" ).validate({
  submitHandler: function(form) {

    function updateTime() {
        $('#slubForm input:submit').val($('#slubForm input:submit').val() + ' >');
    }

    updateTime();
    setInterval(updateTime, 1000); // 5 * 1000 miliseconds

	$('input:submit').attr("disabled", true);
    form.submit();
  }
 });
$.validator.addMethod('filesize', function(value, element, param) {
    // value = file name
    // element = element to validate (<input>)
    // param = size (en bytes)
    return this.optional(element) || (element.files[0].size <= param)
});
</script>

</f:if>


</f:section>
